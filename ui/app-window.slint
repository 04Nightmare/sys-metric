import { VerticalBox, Button, HorizontalBox, GridBox } from "std-widgets.slint";
import { ProcessItem } from "process-item.slint";
import { MetricCard } from "mectric-card.slint";
import { SystemInfoCard } from "info-card.slint";
import { SystemInfoCard2 } from "info-card2.slint";

export component MainWindow inherits Window {
    title: "System Monitor";
    background: #162446;
    preferred-width: 800px;
    preferred-height: 600px;
    in property <float> cpuUsage: 45.2;
    in property <float> memUsage: 62.8;
    in property <float> memPercent: 50.0;
    // in property <float> diskUsage: 34.5;
    in property <string> cpuName;
    in property <string> cpuCount;
    in property <string> motherBoard;
    in property <int> memory;
    in property <string> osName: "N/A";
    in property <string> osVersion: "0000000";
    in property <string> uptime: "00:00:00";
    in property <float> netDownload;
    in property <float> netUpload;
    in property <float> readSpeed;
    in property <float> writeSpeed;
    Flickable {
        viewport-height: 1200px;
        VerticalBox {
            padding: 24px;
            spacing: 24px;
            HorizontalBox {
                height: 60px;
                Text {
                    text: "System Monitor";
                    font-size: 28px;
                    color: #f1f5f9;
                    font-weight: 700;
                    vertical-alignment: center;
                }

                Rectangle {
                    horizontal-stretch: 1;
                }

                Rectangle {
                    width: 120px;
                    height: 40px;
                    background: #3b82f6;
                    border-radius: 8px;
                    TouchArea {
                        mouse-cursor: pointer;
                    }

                    Text {
                        text: "Refresh";
                        color: #f1f5f9;
                        font-size: 14px;
                        font-weight: 600;
                        vertical-alignment: center;
                        horizontal-alignment: center;
                    }
                }
            }

            HorizontalBox {
                SystemInfoCard {
                    cpuName: cpuName;
                    cpuCount: cpuCount;
                    osName: osName;
                    osVersion: osVersion;
                    uptime: uptime;
                }

                SystemInfoCard2 {
                    memory: memory;
                    motherBoard: motherBoard;
                    osName: "asdasda";
                    osVersion: "osVersion";
                    uptime: "uptime";
                }
            }

            GridBox {
                spacing: 18px;
                Row {
                    MetricCard {
                        col: 0;
                        title: "CPU Usage";
                        value: cpuUsage + "%";
                        percentage: cpuUsage;
                        accent-color: #3b82f6;
                    }

                    MetricCard {
                        col: 1;
                        title: "Memory Usage";
                        value: memUsage + "GB";
                        percentage: memPercent;
                        accent-color: #8b5cf6;
                    }

                    TouchArea {
                        col: 2;
                        property <bool> showing-write: true;
                        property <float> read-speed: readSpeed;
                        property <float> write-speed: writeSpeed;
                        clicked => {
                            showing-write = !showing-write;
                        }
                        MetricCard {
                            title: "Disk (" + (showing-write ? "write" : "read") + ")";
                            value: (showing-write ? write-speed : read-speed) + "MB/s";
                            percentage: showing-write ? write-speed : read-speed;
                            accent-color: #10b981;
                            width: parent.width;
                            height: parent.height;
                        }
                    }

                    TouchArea {
                        col: 3;
                        property <bool> showing-download: true;
                        property <float> download-speed: netDownload;
                        property <float> upload-speed: netUpload;
                        clicked => {
                            showing-download = !showing-download;
                        }
                        MetricCard {
                            title: "Network (" + (showing-download ? "Down" : "Up") + ")";
                            value: (showing-download ? download-speed : upload-speed) + "Mb/s";
                            percentage: showing-download ? download-speed : upload-speed;
                            accent-color: #f59e0b;
                            width: parent.width;
                            height: parent.height;
                        }
                    }
                }
            }

            VerticalBox {
                vertical-stretch: 1;
                Text {
                    text: "Top Processes";
                    font-size: 20px;
                    color: #f1f5f9;
                    font-weight: 700;
                }

                VerticalBox {
                    vertical-stretch: 1;
                    spacing: 12px;
                    Flickable {
                        viewport-height: 500px;
                    //height: 200px;
                VerticalBox {
                            ProcessItem {
                                process-name: "chrome.exe";
                                cpu-usage: "23.4%";
                                memory: "1.2 GB";
                            }

                            ProcessItem {
                                process-name: "node.exe";
                                cpu-usage: "15.8%";
                                memory: "486 MB";
                            }

                            ProcessItem {
                                process-name: "code.exe";
                                cpu-usage: "12.3%";
                                memory: "892 MB";
                            }

                            ProcessItem {
                                process-name: "system";
                                cpu-usage: "8.1%";
                                memory: "234 MB";
                            }

                            ProcessItem {
                                process-name: "explorer.exe";
                                cpu-usage: "4.2%";
                                memory: "156 MB";
                            }

                            ProcessItem {
                                process-name: "toons.exe";
                                cpu-usage: "4.2%";
                                memory: "156 MB";
                            }

                            ProcessItem {
                                process-name: "docker.exe";
                                cpu-usage: "4.2%";
                                memory: "156 MB";
                            }
                        }
                    }
                }
            }
        }
    }
}






































































// Button {
//     text: "Get name";
//     clicked => {
//         label.text = "OS: " + sysName;
//         label1.text = "Ver: " + sysVer;
//     }
// }

// HorizontalLayout {
//     Text {
//         text: cpuUsage;
//     }

//     Text {
//         text: memUsage;
//     }
// }

// VerticalLayout {
//     Rectangle {
//         background: white;
//         Text {
//             text: root.count;
//             color: black;
//         }

//         TouchArea {
//             clicked => {
//                 root.count += 1;
//             }
//         }
//     }
// }
